import{O as t,L as e,h as s}from"./fb81ed9a.js";class n extends HTMLElement{constructor(){super(),this.list=[],this.__scrollHandler=this.__scrollHandler.bind(this),this.__isSetup=!1}connectedCallback(){if(this.__isSetup)return;this.__isSetup=!0,this.addEventListener("click",(t=>{var e;const s=t.target;if(s.classList.contains("anchor")){const e=s;t.preventDefault(),this.dispatchEvent(new Event("close-overlay",{bubbles:!0})),setTimeout((()=>{const t=new URL(e.href);document.location.hash=t.hash}),250)}const n=null===(e=s.parentElement)||void 0===e?void 0:e.querySelectorAll("ul a");if(n&&n.length>1){const e=n[1];e.classList.contains("anchor")||(t.preventDefault(),e.click())}}));const t=this.querySelectorAll("li.current a.anchor");for(const e of t){const t=document.getElementById(e.hash.substring(1));t&&this.list.push({top:t.getBoundingClientRect().top,headline:t,anchor:e})}window.addEventListener("scroll",this.__scrollHandler),this.__scrollHandler()}__scrollHandler(){for(const t of this.list)t.top=t.headline.getBoundingClientRect().top;const t=this.list.sort(((t,e)=>Math.abs(t.top)-Math.abs(e.top)));for(let a=0;a<t.length;a+=1){var e,s,n,i,r,o;if(0===a)null===(e=t[0])||void 0===e||null===(s=e.anchor)||void 0===s||null===(n=s.parentElement)||void 0===n||n.classList.add("current");else null===(i=t[a])||void 0===i||null===(r=i.anchor)||void 0===r||null===(o=r.parentElement)||void 0===o||o.classList.remove("current")}}disconnectedCallback(){window.removeEventListener("scroll",this.__scrollHandler)}}customElements.define("rocket-navigation",n);let i,r=t=>t;function o(t){return new Promise((e=>{t.addEventListener("transitionend",e,{once:!0})}))}class a extends(t(e)){static get properties(){return{useOverlay:{type:Boolean,reflect:!0},useOverlayMediaQuery:{type:String}}}_defineOverlayConfig(){return{placementMode:"global",viewportConfig:{placement:"center"},hasBackdrop:!0,preventsScroll:!0,trapsKeyboardFocus:!0,hidesOnEsc:!0,handlesAccessibility:!0,hidesOnOutsideClick:!0,viewportConfig:{placement:"slide"}}}_setupOverlayCtrl(){this.useOverlay&&(super._setupOverlayCtrl(),this._overlayCtrl.transitionHide=async({contentNode:t})=>{t.style.transition="transform 0.20s cubic-bezier(0.4, 0.0, 0.2, 1)",t.style.transform="translateX(-100%)",await o(t)},this._overlayCtrl.transitionShow=async({contentNode:t})=>{t.style.display="block",t.style.transform="translateX(-100%)",t.style.transition="transform 0.25s cubic-bezier(0.4, 0.0, 0.2, 1)",await new Promise((t=>requestAnimationFrame(t))),await new Promise((t=>requestAnimationFrame(t))),t.style.transform="translateX(0)",await o(t)},this._overlayCtrl.contentNode.style.transform="translateX(-100%)",this._overlayCtrl.contentNode.style.willChange="transform",this.containerEl=this._overlayCtrl.contentNode)}_teardownOverlayCtrl(){super._teardownOverlayCtrl(),this._overlayCtrl.contentNode.style.transform="translateX(0)"}updated(t){super.updated(t),t.has("opened")&&(this.opened?document.body.addEventListener("touchstart",this.onGestureStart,{passive:!0}):document.body.removeEventListener("touchstart",this.onGestureStart)),t.has("useOverlay")&&(this.useOverlay?this._setupOverlayCtrl():this._overlayCtrl&&this._teardownOverlayCtrl())}_setupOpenCloseListeners(){super._setupOpenCloseListeners(),this._overlayInvokerNode&&this._overlayInvokerNode.addEventListener("click",this.__toggle)}_teardownOpenCloseListeners(){super._teardownOpenCloseListeners(),this._overlayInvokerNode&&this._overlayInvokerNode.removeEventListener("click",this.__toggle)}__toggle(){this.opened=!this.opened}constructor(){super(),this.useOverlay=!1,this.useOverlayMediaQuery="(max-width: 1024px)",this.__toggle=this.__toggle.bind(this),this.onGestureStart=this.onGestureStart.bind(this),this.onGestureMove=this.onGestureMove.bind(this),this.onGestureEnd=this.onGestureEnd.bind(this),this.updateFromTouch=this.updateFromTouch.bind(this),this._startX=0,this._currentX=0,this._velocity=0,this._left=0,this.__touching=!1,this._timestamp=0}connectedCallback(){super.connectedCallback(),this.useOverlay=!!window.matchMedia(this.useOverlayMediaQuery).matches,window.matchMedia(this.useOverlayMediaQuery).addListener((t=>{this.useOverlay=!!t.matches}))}render(){return s(i||(i=r`
      <slot name="invoker"></slot>
      <slot name="_overlay-shadow-outlet"></slot>
      <div id="overlay-content-node-wrapper">
        <slot name="content"></slot>
      </div>
    `))}onGestureStart(t){this.containerEl&&(this.__touching=!0,this._left=this.containerEl.getBoundingClientRect().left,this._startX=t.targetTouches[0].clientX,this._currentX=this._startX,this._timestamp=(new Date).getTime(),this._velocity=0,this._overlayCtrl.contentNode.style.transition="",document.body.addEventListener("touchmove",this.onGestureMove,{passive:!0}),document.body.addEventListener("touchend",this.onGestureEnd,{passive:!0}),document.body.addEventListener("touchcancel",this.onGestureEnd,{passive:!0}),requestAnimationFrame(this.updateFromTouch))}addVelocitySample(t,e){if(0===e)return;const s=t/e;this._velocity*=.75,this._velocity+=.25*s}onGestureMove(t){if(!this.__touching)return;const e=this._timestamp;this._timestamp=(new Date).getTime();const s=this._timestamp-e,n=this._currentX;this._currentX=t.targetTouches[0].clientX;const i=this._currentX-n;this.addVelocitySample(i,s)}onGestureEnd(){if(!this.__touching||!this.containerEl)return void(this.opened=!1);let t;if(this.__touching=!1,Math.abs(this._velocity)>1)t=this._velocity>0;else{const{left:e}=this.containerEl.getBoundingClientRect(),s=this.containerEl.clientWidth;t=(e+s)/s>=.5}this._overlayCtrl.contentNode.style.transition="transform 0.20s cubic-bezier(0.4, 0.0, 0.2, 1)",this.containerEl.style.transform="",this.opened=t,document.body.removeEventListener("touchmove",this.onGestureMove),document.body.removeEventListener("touchend",this.onGestureEnd),document.body.removeEventListener("touchcancel",this.onGestureEnd)}updateFromTouch(){if(!this.__touching||!this.containerEl)return;requestAnimationFrame(this.updateFromTouch);const t=Math.min(0,this._currentX-this._startX+this._left);this.containerEl.style.transform=`translateX(${t}px)`}}customElements.define("rocket-drawer",a);
